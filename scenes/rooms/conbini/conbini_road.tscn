[gd_scene load_steps=33 format=4 uid="uid://c2t287c1anv12"]

[ext_resource type="Script" uid="uid://cvxcabec87t10" path="res://scenes/rooms/room.gd" id="1_wlqgk"]
[ext_resource type="Texture2D" uid="uid://wuomu4juuwmq" path="res://assets/img/rooms/long-road/Background.png" id="4_vx2fm"]
[ext_resource type="Texture2D" uid="uid://boefrltu5yyth" path="res://assets/img/rooms/long-road/clouds.png" id="5_5dkcg"]
[ext_resource type="Texture2D" uid="uid://bslorhfegfvxb" path="res://assets/img/rooms/long-road/Mountains1.png" id="5_eltvg"]
[ext_resource type="Texture2D" uid="uid://cjj8hvvnx42ob" path="res://assets/img/rooms/long-road/Mountains2.png" id="6_jpegk"]
[ext_resource type="Texture2D" uid="uid://umwyrnuf5a65" path="res://assets/img/rooms/long-road/Asphalt.png" id="8_o32br"]
[ext_resource type="Texture2D" uid="uid://b4jfh601h8xuc" path="res://assets/img/rooms/long-road/DirtGround.png" id="8_v345v"]
[ext_resource type="Texture2D" uid="uid://fyopraeulp4q" path="res://assets/img/rooms/long-road/AsphaltRoad.png" id="9_rj536"]
[ext_resource type="TileSet" uid="uid://b4r8u5pw61oks" path="res://scenes/tilesets/road.tres" id="10_3aew7"]
[ext_resource type="Texture2D" uid="uid://jvntudsq0mep" path="res://assets/img/rooms/conbini/ConvenienceStoreSmall.png" id="10_ha4el"]
[ext_resource type="Texture2D" uid="uid://dk03i6w0a5riy" path="res://assets/img/rooms/long-road/AsphaltBend.png" id="10_v345v"]
[ext_resource type="Texture2D" uid="uid://dq5130kucgbx" path="res://assets/img/rooms/long-road/AsphaltBendRight.png" id="11_i7l8u"]
[ext_resource type="Texture2D" uid="uid://cr1pa6w4wdkar" path="res://assets/img/masks/LightMask.png" id="13_a7812"]
[ext_resource type="PackedScene" uid="uid://hr1pmj7locu0" path="res://scenes/environment/right_railing.tscn" id="13_i7l8u"]
[ext_resource type="PackedScene" uid="uid://b8b0n76kkgv8f" path="res://scenes/environment/left_railing.tscn" id="14_a7812"]
[ext_resource type="PackedScene" uid="uid://ccwcs5vmctju1" path="res://scenes/environment/grate.tscn" id="17_a7812"]
[ext_resource type="Script" uid="uid://mn4wdeeplo2" path="res://scripts/areas/room_door.gd" id="18_a7812"]
[ext_resource type="PackedScene" uid="uid://6cobcq10e24w" path="res://scenes/characters/stan_the_man/stan_the_man.tscn" id="20_ltt3d"]
[ext_resource type="PackedScene" uid="uid://cgwfeop4t4dma" path="res://scenes/particles/rain/rain_ambience.tscn" id="21_6ou16"]
[ext_resource type="PackedScene" uid="uid://b1l65b5ajopcp" path="res://scenes/particles/rain/rain.tscn" id="22_437p3"]
[ext_resource type="Script" uid="uid://btwul30fxa5pu" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="23_e6ywp"]
[ext_resource type="Script" uid="uid://qia23iggn1qa" path="res://scenes/autoload/spawn_manager/spawn_position.gd" id="24_3ajla"]
[ext_resource type="Script" uid="uid://br03kradwjuk0" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_2d.gd" id="25_y2jsn"]
[ext_resource type="Script" uid="uid://d0xyrnkgp68i1" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="26_elp6h"]

[sub_resource type="Environment" id="Environment_a8y0u"]
background_mode = 3
glow_enabled = true
glow_levels/3 = 3.88
glow_bloom = 1.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4sqh7"]
size = Vector2(116, 104)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_a7812"]
size = Vector2(167, 79)

[sub_resource type="Resource" id="Resource_og1vs"]
script = ExtResource("26_elp6h")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="Gradient" id="Gradient_4sqh7"]
offsets = PackedFloat32Array(0, 0.972727)
colors = PackedColorArray(1, 1, 1, 0.494118, 0.572549, 0.572549, 0.572549, 0.305882)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_fuxwc"]
gradient = SubResource("Gradient_4sqh7")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_l5n1i"]
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(720, 25, 1)
direction = Vector3(0, -1, 0)
spread = 90.0
initial_velocity_min = 50.0
initial_velocity_max = 50.0
gravity = Vector3(0, 50, 0)
scale_min = 0.5
color_ramp = SubResource("GradientTexture1D_fuxwc")

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_wlqgk"]
polygon = PackedVector2Array(-787, 450, -787, 571, 558, 572, 560, 449)

[node name="ConbiniRoad" type="Node2D" node_paths=PackedStringArray("camera", "player")]
y_sort_enabled = true
script = ExtResource("1_wlqgk")
camera = NodePath("Camera2D")
player = NodePath("StanTheMan")

[node name="Bg" type="Node2D" parent="."]

[node name="Parallax2D3" type="Parallax2D" parent="Bg"]
repeat_size = Vector2(480, 270)
repeat_times = 4

[node name="Background" type="Sprite2D" parent="Bg/Parallax2D3"]
z_index = -20
texture = ExtResource("4_vx2fm")

[node name="Parallax2D7" type="Parallax2D" parent="Bg"]
scroll_scale = Vector2(0.3, 1)
scroll_offset = Vector2(0, -129)
repeat_size = Vector2(320, 0)
autoscroll = Vector2(-1, 0)
repeat_times = 10

[node name="Clouds" type="Sprite2D" parent="Bg/Parallax2D7"]
modulate = Color(0.0728426, 0.0728426, 0.0728426, 1)
z_index = -20
position = Vector2(-2, -6)
texture = ExtResource("5_5dkcg")

[node name="Parallax2D" type="Parallax2D" parent="Bg"]
scroll_scale = Vector2(0.3, 1)
repeat_size = Vector2(480, 0)
repeat_times = 4

[node name="Mountains1" type="Sprite2D" parent="Bg/Parallax2D"]
z_index = -20
position = Vector2(0, -92)
texture = ExtResource("5_eltvg")

[node name="Parallax2D6" type="Parallax2D" parent="Bg"]
scroll_scale = Vector2(0.3, 1)
repeat_size = Vector2(320, 0)
autoscroll = Vector2(-4, 0)
repeat_times = 10

[node name="Clouds" type="Sprite2D" parent="Bg/Parallax2D6"]
modulate = Color(1, 1, 1, 0.392)
z_index = -20
position = Vector2(0, -64)
texture = ExtResource("5_5dkcg")

[node name="Parallax2D2" type="Parallax2D" parent="Bg"]
scroll_scale = Vector2(0.5, 1)
repeat_size = Vector2(480, 0)
repeat_times = 4

[node name="Mountains2" type="Sprite2D" parent="Bg/Parallax2D2"]
z_index = -20
position = Vector2(0, -120)
texture = ExtResource("6_jpegk")

[node name="Parallax2D4" type="Parallax2D" parent="Bg"]
scroll_scale = Vector2(0.5, 1)
repeat_size = Vector2(480, 0)
repeat_times = 4

[node name="DirtGround" type="Sprite2D" parent="Bg/Parallax2D4"]
z_index = -10
position = Vector2(0, -21)
texture = ExtResource("8_v345v")

[node name="Parallax2D5" type="Parallax2D" parent="Bg"]
repeat_size = Vector2(128, 0)
repeat_times = 20

[node name="Asphalt" type="Sprite2D" parent="Bg/Parallax2D5"]
z_index = -1
position = Vector2(-3, 120)
texture = ExtResource("8_o32br")

[node name="AsphaltRoad" type="Sprite2D" parent="Bg/Parallax2D5"]
z_index = -1
position = Vector2(-3, 40)
texture = ExtResource("9_rj536")

[node name="AsphaltBend" type="Sprite2D" parent="."]
modulate = Color(0, 0, 0, 1)
z_index = -5
position = Vector2(-160, 15)
texture = ExtResource("10_v345v")

[node name="AsphaltBendRight" type="Sprite2D" parent="."]
modulate = Color(0, 0, 0, 1)
z_index = -5
position = Vector2(46, 16)
texture = ExtResource("11_i7l8u")

[node name="ConvenienceStoreSmall" type="Sprite2D" parent="."]
position = Vector2(-55, -45)
scale = Vector2(0.6, 0.6)
texture = ExtResource("10_ha4el")

[node name="PointLight2D" type="PointLight2D" parent="ConvenienceStoreSmall"]
color = Color(0.24, 0.911333, 1, 1)
shadow_enabled = true
texture = ExtResource("13_a7812")
texture_scale = 17.2

[node name="TileMapLayer" type="TileMapLayer" parent="."]
position = Vector2(0, -15)
tile_map_data = PackedByteArray("AAD0/wAAAAABAAAAAADz/wAAAAABAAAAAADy/wAAAAABAAAAAADx/wAAAAABAAAAAADw/wAAAAABAAAAAADv/wAAAAABAAAAAADu/wAAAAACAAAAAADt/wAAAAABAAAAAADs/wAAAAABAAAAAADr/wAAAAABAAAAAADq/wAAAAABAAAAAADp/wAAAAACAAAAAADo/wAAAAABAAAAAADn/wAAAAABAAAAAADm/wAAAAABAAAAAADl/wAAAAABAAAAAADk/wAAAAACAAAAAADj/wAAAAABAAAAAADi/wAAAAABAAAAAADh/wAAAAABAAAAAADg/wAAAAABAAAAAADf/wAAAAABAAAAAADe/wAAAAACAAAAAADd/wAAAAABAAAAAADc/wAAAAABAAAAAADb/wAAAAABAAAAAADa/wAAAAABAAAAAADZ/wAAAAABAAAAAADY/wAAAAACAAAAAADX/wAAAAABAAAAAADW/wAAAAABAAAAAADV/wAAAAABAAAAAADU/wAAAAABAAAAAADT/wAAAAABAAAAAADS/wAAAAACAAAAAADR/wAAAAABAAAAAADQ/wAAAAABAAAAAADP/wAAAAABAAAAAADO/wAAAAABAAAAAADN/wAAAAABAAAAAADM/wAAAAABAAAAAADL/wAAAAABAAAAAADK/wAAAAABAAAAAADJ/wAAAAABAAAAAADI/wAAAAABAAAAAAAEAAAAAAABAAAAAAAFAAAAAAABAAAAAAAGAAAAAAABAAAAAAAHAAAAAAABAAAAAAAIAAAAAAACAAAAAAAJAAAAAAABAAAAAAAKAAAAAAABAAAAAAALAAAAAAABAAAAAAAMAAAAAAABAAAAAAANAAAAAAACAAAAAAAOAAAAAAABAAAAAAAPAAAAAAABAAAAAAAQAAAAAAABAAAAAAARAAAAAAABAAAAAAASAAAAAAABAAAAAAATAAAAAAACAAAAAAAUAAAAAAABAAAAAAAVAAAAAAABAAAAAAAWAAAAAAABAAAAAAAXAAAAAAABAAAAAAAYAAAAAAACAAAAAAAZAAAAAAABAAAAAAAaAAAAAAABAAAAAAAbAAAAAAABAAAAAAAcAAAAAAABAAAAAAAdAAAAAAABAAAAAAAeAAAAAAABAAAAAAAfAAAAAAACAAAAAAAgAAAAAAABAAAAAAAhAAAAAAABAAAAAAAiAAAAAAABAAAAAAAjAAAAAAABAAAAAAAkAAAAAAABAAAAAAAlAAAAAAABAAAAAAAmAAAAAAABAAAAAAAnAAAAAAABAAAAAAAoAAAAAAABAAAAAAApAAAAAAABAAAAAAAqAAAAAAABAAAAAAD2/wAAAAACAA8AAAD3/wAAAAADAA8AAAD3////AAADAA4AAAD4////AAAEAA4AAAD1/wAAAAABAA8AAAACAAAAAAADABIAAAABAAAAAAACABIAAAABAP//AAACABEAAAAAAP//AAABABEAAAADAAAAAAAEABIAAAA=")
tile_set = ExtResource("10_3aew7")

[node name="Railing" type="Node2D" parent="."]
position = Vector2(0, -10)

[node name="RightRailing" parent="Railing" instance=ExtResource("13_i7l8u")]
position = Vector2(117, -8)

[node name="RightRailing2" parent="Railing" instance=ExtResource("13_i7l8u")]
position = Vector2(213, -8)

[node name="RightRailing3" parent="Railing" instance=ExtResource("13_i7l8u")]
position = Vector2(309, -8)

[node name="RightRailing4" parent="Railing" instance=ExtResource("13_i7l8u")]
position = Vector2(405, -8)

[node name="RightRailing5" parent="Railing" instance=ExtResource("13_i7l8u")]
position = Vector2(501, -8)

[node name="LeftRailing" parent="Railing" instance=ExtResource("14_a7812")]
position = Vector2(-213, -8)

[node name="LeftRailing2" parent="Railing" instance=ExtResource("14_a7812")]
position = Vector2(-308, -8)

[node name="LeftRailing3" parent="Railing" instance=ExtResource("14_a7812")]
position = Vector2(-404, -8)

[node name="LeftRailing4" parent="Railing" instance=ExtResource("14_a7812")]
position = Vector2(-499, -8)

[node name="LeftRailing5" parent="Railing" instance=ExtResource("14_a7812")]
position = Vector2(-595, -8)

[node name="LeftRailing6" parent="Railing" instance=ExtResource("14_a7812")]
position = Vector2(-691, -8)

[node name="LeftRailing7" parent="Railing" instance=ExtResource("14_a7812")]
position = Vector2(-787, -8)

[node name="Asphalt" type="Sprite2D" parent="."]
modulate = Color(0, 0, 0, 1)
z_index = -5
position = Vector2(-58, 16)
texture = ExtResource("8_o32br")

[node name="Grate" parent="." instance=ExtResource("17_a7812")]
position = Vector2(-471, 5)
scale = Vector2(0.6, 0.6)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.054902, 0.0901961, 0.372549, 0.196078)
metadata/_edit_use_anchors_ = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_a8y0u")

[node name="StanTheMan" parent="." instance=ExtResource("20_ltt3d")]
position = Vector2(361, 12)
scale_factor = 300.0
scale_factor_min = 0.7

[node name="RoomDoor" type="Area2D" parent="." node_paths=PackedStringArray("spawn_position")]
position = Vector2(-795, 40)
collision_layer = 64
script = ExtResource("18_a7812")
door_id = "1"
goto_door_id = "1"
scene_path = "res://scenes/rooms/long_road.tscn"
spawn_position = NodePath("SpawnPosition")
metadata/_custom_type_script = "uid://mn4wdeeplo2"

[node name="CollisionShape2D" type="CollisionShape2D" parent="RoomDoor"]
position = Vector2(-36, -6)
shape = SubResource("RectangleShape2D_4sqh7")

[node name="SpawnPosition" type="Node2D" parent="RoomDoor"]
position = Vector2(37, -48)
script = ExtResource("24_3ajla")
metadata/_custom_type_script = "uid://qia23iggn1qa"

[node name="RoomDoor2" type="Area2D" parent="." node_paths=PackedStringArray("spawn_position")]
position = Vector2(-48, -55)
collision_layer = 64
script = ExtResource("18_a7812")
door_id = "2"
goto_door_id = "1"
scene_path = "res://scenes/rooms/conbini/conbini.tscn"
spawn_position = NodePath("SpawnPosition")
metadata/_custom_type_script = "uid://mn4wdeeplo2"

[node name="CollisionShape2D" type="CollisionShape2D" parent="RoomDoor2"]
position = Vector2(-10.5, 6.5)
shape = SubResource("RectangleShape2D_a7812")

[node name="SpawnPosition" type="Node2D" parent="RoomDoor2"]
position = Vector2(-15, 55)
script = ExtResource("24_3ajla")
metadata/_custom_type_script = "uid://qia23iggn1qa"

[node name="RoomDoor3" type="Area2D" parent="." node_paths=PackedStringArray("spawn_position")]
position = Vector2(621, 41)
collision_layer = 64
script = ExtResource("18_a7812")
door_id = "3"
goto_door_id = "1"
scene_path = "res://scenes/rooms/other_long_road_under_construction.tscn"
spawn_position = NodePath("SpawnPosition")
metadata/_custom_type_script = "uid://mn4wdeeplo2"

[node name="CollisionShape2D" type="CollisionShape2D" parent="RoomDoor3"]
position = Vector2(-36, -6)
shape = SubResource("RectangleShape2D_4sqh7")

[node name="SpawnPosition" type="Node2D" parent="RoomDoor3"]
position = Vector2(-139, -48)
script = ExtResource("24_3ajla")
metadata/_custom_type_script = "uid://qia23iggn1qa"

[node name="Camera2D" type="Camera2D" parent="."]
physics_interpolation_mode = 1
position = Vector2(180, -105)
process_callback = 0
limit_left = -780
limit_top = -500
limit_right = 500
limit_bottom = 75

[node name="PhantomCameraHost" type="Node" parent="Camera2D"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("23_e6ywp")
metadata/_custom_type_script = "uid://btwul30fxa5pu"

[node name="PhantomCamera2D2" type="Node2D" parent="." node_paths=PackedStringArray("follow_target")]
top_level = true
position = Vector2(180, -105)
script = ExtResource("25_y2jsn")
follow_mode = 2
follow_target = NodePath("../StanTheMan")
tween_resource = SubResource("Resource_og1vs")
follow_damping = true
follow_damping_value = Vector2(0.5, 0.5)
limit_left = -780
limit_top = -500
limit_right = 500
limit_bottom = 75
metadata/_custom_type_script = "uid://br03kradwjuk0"

[node name="Weather" type="Node" parent="."]

[node name="RainAmbience" parent="Weather" instance=ExtResource("21_6ou16")]
position = Vector2(0, -453)

[node name="RainSplash" type="GPUParticles2D" parent="Weather"]
position = Vector2(-130, 38)
amount = 200
lifetime = 0.5
visibility_rect = Rect2(-100, -100, 1000, 1000)
local_coords = true
process_material = SubResource("ParticleProcessMaterial_l5n1i")

[node name="Rain" parent="Weather" instance=ExtResource("22_437p3")]
position = Vector2(0, -453)

[node name="LightOccluder2D2" type="LightOccluder2D" parent="Weather/Rain"]
occluder = SubResource("OccluderPolygon2D_wlqgk")

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(-6, 3)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(-509, -29, -121, -39, -9, -35, 24, -20, -122, -22, -160, -12, -784, -16, -782, 87, 558, 83, 554, -12, 58, -13, 37, -18, -3, -35, 555, -28, 578, -29, 578, 103, -802, 98, -807, -27)
